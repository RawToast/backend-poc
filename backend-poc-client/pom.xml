<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <parent>
        <artifactId>backend-poc</artifactId>
        <groupId>backend-poc</groupId>
        <version>0.0.1-SNAPSHOT</version>
    </parent>
    <modelVersion>4.0.0</modelVersion>

    <artifactId>backend-poc-client</artifactId>

    <dependencies>
        <dependency>
            <groupId>io.dropwizard</groupId>
            <artifactId>dropwizard-jdbi</artifactId>
            <version>${dropwizard.version}</version>
        </dependency>
    </dependencies>

    <build>
    <plugins>
        <!-- JOOQ SET-UP -->
        <plugin>
            <groupId>org.jooq</groupId>
            <artifactId>jooq-codegen-maven</artifactId>
            <version>3.4.2</version>

            <executions>
                <execution>
                    <goals>
                        <goal>generate</goal>
                    </goals>
                </execution>
            </executions>

            <dependencies>
                <dependency>
                    <groupId>postgresql</groupId>
                    <artifactId>postgresql</artifactId>
                    <version>${postgres.jdbc.version}</version>
                </dependency>
                <dependency>
                    <groupId>com.google.auto.value</groupId>
                    <artifactId>auto-value</artifactId>
                    <version>${autovalue.version}</version>
                </dependency>
            </dependencies>

            <configuration>
                <jdbc>
                    <driver>org.postgresql.Driver</driver>
                    <url>jdbc:postgresql://localhost:5432/pocdb</url>
                    <user>pocuser</user>
                    <password>pocpassword</password>
                </jdbc>

                <generator>
                    <name>org.jooq.util.DefaultGenerator</name>
                    <generate>
                        <deprecated>false</deprecated>
                    </generate>
                    <database>
                        <name>org.jooq.util.postgres.PostgresDatabase</name>
                        <includes>.*</includes>
                        <inputSchema>coopjooqpoc</inputSchema>

                        <customTypes>
                            <customType>
                                <name>DateTime</name>
                                <type>org.joda.time.DateTime</type>
                                <converter>com.bendb.dropwizard.jooq.JodaDateTimeConverter</converter>
                            </customType>
                        </customTypes>

                        <forcedTypes>
                            <forcedType>
                                <name>DateTime</name>
                                <types>(?i:timestamp).*</types>
                            </forcedType>
                        </forcedTypes>
                    </database>
                    <target>
                        <packageName>coop.poc.jooq</packageName>
                        <directory>src/main/java</directory>
                    </target>
                </generator>
            </configuration>
        </plugin>

    </plugins>
    </build>


</project>